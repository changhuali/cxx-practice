# gcc

## -E

```sh
cc -E xxx.c -o xxx.i
```

预处理源码:

- 展开所有宏定义 `#define VERSION 1.0.0`
- 处理所有条件编译 `#if #ifdef #elif #endif`
- 处理预编译指令, 所有头文件会递归展开 `#include <xxx.h>`

  - 遇到的头文件会以`# linenum filename flags`的形式出现在`.i`文件中

    - linenum 文件行号
    - flags 可能的值为 1、2、3、4
      - 1 标志进入一个文件
      - 2 标志回到一个文件
      - 3 表示后续内容来自系统头文件(部分警告会被抑制)
      - 4 表示后续的内容应该被当做包含在`extern "C"`块中

    > 由 flags 可以得出, 头文件采用 DFS 的方式进行展开, 通过行号可以判断后续代码是在源码中的哪一行

- 删除注释(会保留删除注释后留下的空行) `// /**/`
